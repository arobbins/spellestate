function redux_add_font(c,a){c.preventDefault();var d;var b=jQuery(this);if(d){d.open();return}d=wp.media({multiple:true,library:{type:["application","font"]},title:b.data("choose"),button:{text:b.data("update")}});d.on("click",function(){});d.on("select",function(){var h=d.state().get("selection").first();d.close();if(h.attributes.type!=="application"&&h.attributes.type!=="font"){return}var f=jQuery(a).find(".media_add_font").attr("data-nonce");var g={action:"redux_custom_fonts",nonce:f,attachment_id:h.id,title:h.attributes.title,mime:h.attributes.mime,};if(g.mime=="application/zip "){var e="Unzipping archive and generating any missing font files."}else{var e="Converting font file."}jQuery.blockUI({message:"<h1>"+redux.args.please_wait+"...</h1>"});jQuery.post(ajaxurl,g,function(i){i=jQuery.parseJSON(i);if(i.type=="success"){window.onbeforeunload="";location.reload()}else{if(i.type=="error"){alert("There was an error converting your font: "+i.msg)}}})});d.open()}function redux_remove_font(a){if(!a.find(".remove-image").addClass("hide")){return}}(function(a){a.redux=a.redux||{};a(document).ready(function(){a.redux.custom_fonts()});a.redux.custom_fonts=function(){a(".remove-font").unbind("click").on("click",function(){redux_remove_font(a(this).parents("fieldset.redux-field:first"))});a(".media_add_font").unbind().on("click",function(b){redux_add_font(b,a(this).parents("fieldset.redux-field:first"))});a(".fontDelete").on("click",function(d){d.preventDefault();var b=jQuery(this).parents("td:first");b.find(".spinner").show();var c=jQuery(this).data();c.action="redux_custom_fonts";c.nonce=jQuery(this).parents(".redux-container-custom_font:first").find(".media_add_font").attr("data-nonce");jQuery.post(ajaxurl,c,function(f){f=jQuery.parseJSON(f);if(f.type&&f.type=="success"){var e=b.parents("table >tbody >tr").length;if(e==1){b.parents("table:first").fadeOut().remove()}else{b.parents("tr:first").fadeOut().remove()}}else{alert("There was an error deleting your font: "+f.msg);b.find(".spinner").hide()}});return false})}})(jQuery);